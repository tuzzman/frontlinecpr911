<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard • FrontlineCPR911</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" href="/tab_icon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/admin20251106.css?v=1731616000" />
  <style>
    /* Hide admin content until authenticated */
    [data-requires-auth] {
      display: none !important;
    }
    [data-requires-auth].authenticated {
      display: flex !important;
      min-height: 100vh;
    }
    
    /* Desktop: hide mobile topbar */
    @media (min-width: 769px) {
      .admin-topbar {
        display: none !important;
      }
    }
    
    /* Mobile: show topbar, hide sidebar, adjust layout */
    @media (max-width:768px){
      /* CRITICAL: Hide desktop tables on mobile - show cards only */
      .class-summary-table,
      .class-summary-table thead,
      .class-summary-table tbody,
      .class-summary-table th,
      .class-summary-table td,
      .class-summary-table tr {
        display: none !important;
      }
      .mobile-card-list {
        display: block !important;
      }
      
      /* Mobile card styling - inline to bypass cache */
      .mobile-card {
        background: #fff;
        border: 1px solid #f4f4f4;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .mobile-card-label {
        font-weight: 600;
        color: #666;
        min-width: 100px;
        max-width: 100px;
        flex-shrink: 0;
        font-size: 0.85rem;
      }
      .mobile-card-value {
        color: #1A1A1A;
        flex: 1;
        font-size: 0.9rem;
        word-wrap: break-word;
      }
      .mobile-card-row {
        display: flex;
        padding: 0.5rem 0;
        border-bottom: 1px solid #f0f0f0;
        align-items: flex-start;
      }
      
      [data-requires-auth].authenticated {
        display: block !important;
        min-height: auto;
      }
      .admin-topbar {
        display: block !important;
        position: sticky;
        top: 0;
        left: 0;
        right: 0;
        background: #1A1A1A;
        color: #fff;
        font-family: Roboto, sans-serif;
        z-index: 999;
      }
      html,body{width:100%;max-width:100%;overflow-x:hidden}
      body{display:block}
      .admin-wrapper{display:block;width:100%}
      .sidebar{display:none!important}
      .main-content{width:100%!important;padding:1rem!important;margin:0!important} /* Reduced padding for better mobile spacing */
      .admin-topbar .topbar-inner{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;position:relative}
      .admin-topbar .brand{color:#CC0000;font-weight:700}
      .admin-mobile-nav{display:none}
      .admin-mobile-nav.open{display:block;position:absolute;top:calc(100% + 8px);right:1rem;width:260px;max-width:85vw;background:#1A1A1A;box-shadow:0 4px 12px rgba(0,0,0,0.3);border-radius:8px;overflow:hidden;z-index:1000;border:1px solid rgba(255,255,255,0.1)}
      .admin-mobile-nav ul{list-style:none;margin:0;padding:0}
      .admin-mobile-nav li a{display:block;padding:0.9rem 1.5rem;color:#fff;text-decoration:none;border-bottom:1px solid rgba(255,255,255,0.1)}
      .admin-mobile-nav li:last-child a{border-bottom:none}
      .admin-mobile-nav li a:hover{background:#990000}
      .admin-menu-toggle{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.3);padding:.35rem .6rem;border-radius:4px;font-size:1.1rem;cursor:pointer}
    }
  </style>
</head>
<body class="admin-compact admin-ultra">
  <!-- Mobile Topbar -->
  <div class="admin-topbar">
    <div class="topbar-inner">
      <div class="brand">FrontlineCPR911 Admin</div>
      <button class="admin-menu-toggle" aria-expanded="false" aria-label="Toggle menu">☰</button>
    </div>
    <nav class="admin-mobile-nav">
      <ul>
        <li><a href="dashboard.html" class="active">Group Requests</a></li>
        <li><a href="clients.html">Clients & Rosters</a></li>
        <li><a href="classes.html">Classes</a></li>
        <li><a href="../index.html">Public Homepage</a></li>
        <li><a href="#" class="logout-link" id="logout">Logout</a></li>
      </ul>
    </nav>
  </div>

  <div class="admin-wrapper" data-requires-auth>
    <aside class="sidebar">
      <div class="logo-admin">
        <h2>FrontlineCPR911</h2>
        <p>Admin Dashboard</p>
      </div>
      <nav class="admin-nav">
        <ul>
          <li><a href="dashboard.html" class="active">Group Requests</a></li>
          <li><a href="clients.html">Clients & Rosters</a></li>
          <li><a href="classes.html">Classes</a></li>
          <li><a href="../index.html">Public Homepage</a></li>
          <li><a href="#" class="logout-link" id="logout">Logout</a></li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <header class="admin-header">
        <h1>Group Requests</h1>
      </header>
      <!-- Summary Metrics -->
      <section class="summary-cards" id="gr-summary-cards" aria-label="Group Request Summary" style="margin-bottom:1.5rem;">
        <div class="card card-white" data-metric="total">
          <h3>Total Requests</h3>
          <p class="data-point" id="metric-total">0</p>
        </div>
        <div class="card card-red" data-metric="new">
          <h3>New</h3>
          <p class="data-point" id="metric-new">0</p>
        </div>
        <div class="card card-black" data-metric="contacted">
          <h3>Contacted</h3>
          <p class="data-point" id="metric-contacted">0</p>
        </div>
        <div class="card card-white" data-metric="scheduled">
          <h3>Scheduled</h3>
          <p class="data-point" id="metric-scheduled">0</p>
        </div>
        <div class="card card-white" data-metric="closed">
          <h3>Closed</h3>
          <p class="data-point" id="metric-closed">0</p>
        </div>
      </section>

      <section class="dashboard-table-section">
        <div id="gr-banner-region" aria-live="polite" style="min-height:0;"></div>
        <div style="display:flex; align-items:center; gap:.5rem; flex-wrap:wrap;">
          <details class="admin-controls">
            <summary>Filters</summary>
            <form id="gr-filter-form" class="client-filter-form one-line-form">
              <div class="form-grid">
                <div class="form-group">
                  <label for="gr-status">Status</label>
                  <select id="gr-status">
                    <option value="">All</option>
                    <option value="new">New</option>
                    <option value="contacted">Contacted</option>
                    <option value="scheduled">Scheduled</option>
                    <option value="closed">Closed</option>
                  </select>
                </div>
                <div class="form-group"><label for="gr-from">From</label><input type="date" id="gr-from" /></div>
                <div class="form-group"><label for="gr-to">To</label><input type="date" id="gr-to" /></div>
                <button class="btn-action view" type="submit">Apply</button>
              </div>
            </form>
          </details>
          <button id="export-gr" class="btn-action export">Export CSV</button>
        </div>

  <table class="class-summary-table" style="margin-top: 1rem;">
          <thead>
            <tr>
              <th>Date</th>
              <th>Organization</th>
              <th>Contact</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Course</th>
              <th>#</th>
              <th>Status</th>
              <th>Notes</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="gr-tbody">
            <tr><td colspan="10">Loading...</td></tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <script src="/assets/js/admin.v3.js?v=1731616000"></script>
</body>
</html>