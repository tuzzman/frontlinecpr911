# Static site defaults for Hostinger/Apache
# Prevent content negotiation from interfering with .html resolution
<IfModule mod_negotiation.c>
  Options -MultiViews
</IfModule>

# Ensure index.html is used as directory index
DirectoryIndex index.html

# Rewrites: map versioned CSS URLs to canonical asset for cache-busting
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # If requested path is an existing file or directory, serve it
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # Map style-<version>.css to style.css (e.g., assets/css/style-20251106.css)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^assets/css/style-[0-9A-Za-z_.-]+\.css$ assets/css/style.css [L,NC]

  # Map dotted versions like style.v2.css to style.css
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^assets/css/style\.[0-9A-Za-z_.-]+\.css$ assets/css/style.css [L,NC]
</IfModule>

# Prevent HTML from being cached by CDN/browsers so new pages deploy immediately
<IfModule mod_headers.c>
  <FilesMatch "\.(html|htm)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
</IfModule>

# Security and convenience
Options -Indexes
